[
  {
    "role": "system",
    "content": "You are a precise coding assistant. Fix the error and return ONLY the corrected output. No explanations or commentary."
  },
  {
    "role": "user",
    "content": "Original task:\nWrite a Python function with this exact signature:\n\ndef normalize_phone(s: str) -> str:\n\nRequirements:\n1. Strip all non-digit characters from the input\n2. If the result is exactly 10 digits, format as AAA-BBB-CCCC\n3. If the result is exactly 11 digits AND starts with '1', drop the leading '1' and format as AAA-BBB-CCCC\n4. Otherwise, raise a ValueError\n\nReturn ONLY the function definition. No explanations, no examples, no imports, no markdown code fences - just the raw Python function.\n\nYour previous output:\n```python\ndef normalize_phone(s: str) -> str:\n    cleaned = ''.join(filter(str.isdigit, s))\n    if len(cleaned) == 10:\n        return f\"{cleaned[:3]}-{cleaned[3:6]}-{cleaned[6:]}\"\n    elif len(cleaned) == 11 and cleaned.startswith('1'):\n        cleaned = cleaned[1:]\n        return f\"{cleaned[:3]}-{cleaned[3:6]}-{cleaned[6:]}\"\n    else:\n        raise ValueError(\"Invalid phone number format\")\n```\n\nError:\nPytest failed:\n...F.                                                                    [100%]\n================================== FAILURES ===================================\n_____________________________ test_invalid_length _____________________________\n\n    def test_invalid_length():\n        \"\"\"Test that invalid lengths raise ValueError.\"\"\"\n        with pytest.raises(ValueError):\n            normalize_phone(\"123456789\")  # 9 digits\n>       with pytest.raises(ValueError):\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       Failed: DID NOT RAISE <class 'ValueError'>\n\ntest_solution.py:28: Failed\n=========================== short test summary info ===========================\nFAILED test_solution.py::test_invalid_length - Failed: DID NOT RAISE <class '...\n1 failed, 4 passed in 0.06s\n\n\n\nReturn ONLY the corrected output."
  }
]